(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{475:function(t,v,_){"use strict";_.r(v);var s=_(65),a=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"_24-проблемы-конкурирующих-транзакции-и-методы-их-решения-уровни-изоляции-транзакции"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_24-проблемы-конкурирующих-транзакции-и-методы-их-решения-уровни-изоляции-транзакции"}},[t._v("#")]),t._v(" 24. Проблемы конкурирующих транзакций и методы их решения. Уровни изоляции транзакций")]),t._v(" "),_("h2",{attrs:{id:"проблемы-конкурирующих-транзакции"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#проблемы-конкурирующих-транзакции"}},[t._v("#")]),t._v(" Проблемы конкурирующих транзакций")]),t._v(" "),_("ol",[_("li",[_("p",[_("strong",[t._v("Проблема потерянного обновления")])]),t._v(" "),_("p",[t._v("Ситуация, когда при одновременном изменении одного блока данных разными транзакциями одно из изменений теряется")]),t._v(" "),_("p",[t._v("Несколько транзакций изменяют один и тот же кортеж, в результате сохраняются изменения лишь последней транзакции")]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("Кладём и списываем деньги со счёта")])])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Проблема грязного чтения")])]),t._v(" "),_("p",[t._v("Возникает при чтении одной транзакцией кортежа, который уже изменён, но ещё не сохранён другой транзакцией, которая затем будет отменена.")]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("Кладём и списываем деньги со счёта, после этого пытаемся отменить пополнение")])])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Проблема неповторяемого чтения")])]),t._v(" "),_("p",[t._v("Ситуация, когда при повторном чтении данных в рамках одной транзакции ранее прочитанные данные оказываются изменёнными")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Проблема фантомного чтения")])]),t._v(" "),_("p",[t._v("Ситуация, когда при повторном чтении в рамках одной транзакции одна и та же выборка дает разные множества строк.")]),t._v(" "),_("p",[t._v("При повторном чтении данных транзкация обнаруживает кортежи, добавленные другой транзакцией после предыдущего чтения данных")]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("Сначала считываем данные, потом добавляем новую запись и на основе считанных данных получаем неверный результат (например, среднее значение в параллельных подзапросах)")])])])]),t._v(" "),_("h2",{attrs:{id:"блокировки"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#блокировки"}},[t._v("#")]),t._v(" Блокировки")]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("Все транзакции строятся на основе блокировок - блокировки кортежей, атрибутов, таблиц или всей базы данных")])]),t._v(" "),_("h3",{attrs:{id:"классификация-блокировок"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#классификация-блокировок"}},[t._v("#")]),t._v(" Классификация блокировок")]),t._v(" "),_("ol",[_("li",[_("p",[t._v("Явные - непосредственно указаны в коде транзакции")])]),t._v(" "),_("li",[_("p",[t._v('Неявные - накладываются СУБД, если определённый алгоритм "понимает", что что-то нужно заблокировать')])]),t._v(" "),_("li",[_("p",[t._v("Монопольные - блокируются все способы взаимодействия с объектом")])]),t._v(" "),_("li",[_("p",[t._v("Коллективные - блокируется только изменение объекта")])])]),t._v(" "),_("p",[t._v("Дедлоки")]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("Если одна из транзакций пытается наложить блокировку, пересекающуюся с какой-то другой блокировкой - появление "),_("strong",[t._v("дедлоков")])])]),t._v(" "),_("h2",{attrs:{id:"уровни-изоляции-для-решения-конкурирующих-транзакции"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#уровни-изоляции-для-решения-конкурирующих-транзакции"}},[t._v("#")]),t._v(" Уровни изоляции (для решения конкурирующих транзакций)")]),t._v(" "),_("ol",[_("li",[_("p",[_("strong",[t._v("Незавершённое чтение")])]),t._v(" "),_("p",[t._v("Требует, чтобы изменять данные могла только одна транзакция. Поможет справиться с "),_("strong",[t._v("проблемой потерянного обновления")]),t._v(".")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Завершённое чтение")])]),t._v(" "),_("p",[t._v("Если транзакция начала изменение данных, то никакая другая транзакция не сможет их прочитать или изменить до завершения первой. Поможет справитсья с "),_("strong",[t._v("проблемой грязного чтения")]),t._v(".")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Воспроизводимое чтение")])]),t._v(" "),_("p",[t._v("Если транзакция считывает данные, то никакая другая транзакция не сможет их изменить до завершения первой. "),_("em",[t._v("Видимо")]),t._v(", поможет справиться с "),_("strong",[t._v("проблемой неповторяемого чтения")])])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("Сериализуемость")])]),t._v(" "),_("p",[t._v("Если транзакция обращается к данным, то никакая другая транзакция не сможет добавить новые строки или изменить существующие, которые могли бы быть считаны при выполнении текущей транзакции. "),_("em",[t._v("Видимо")]),t._v(", поможет справиться с "),_("strong",[t._v("проблемой фантомного чтения")])])])]),t._v(" "),_("h2",{attrs:{id:"долговечность"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#долговечность"}},[t._v("#")]),t._v(" Долговечность")]),t._v(" "),_("p",[t._v("Обеспечивается журналируемостью транзакций")])])}),[],!1,null,null,null);v.default=a.exports}}]);